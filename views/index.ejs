<!DOCTYPE html>
<html>
<head>
    <title>Gym Tracker</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <h1>💪 Gym Tracker</h1>

    <div class="nav">
        <a href="/">📊 Workouts</a>
        <a href="/calendar">📅 Calendar</a>
        <a href="/exercises">🏋️ Exercises</a>
    </div>

    <h2>Start a Preset Workout</h2>
    <div id="preset-workout-list">
        <% if (preset_workouts.length === 0) { %>
            <p>No preset workouts available. Add your first workout in the Exercises section!</p>
        <% } else { %>
            <% preset_workouts.forEach(workout => { %>
                <div class="workout" id="preset-workouts">
                    <div>
                        <strong><%= workout.name %></strong>
                        <br>
                        <% workout.exercises.forEach((ex, i) => { %>
                            <%= `${i + 1}. ${ex}` %>
                            <br>
                        <% }) %>
                    </div>
                    <button class="start-workout-btn" data-workout-id="<%= workout.id %>">Start Workout</button>
                </div>
            <% }); %>
        <% } %>
    </div>
            
    <h2>Make a Workout</h2>
    <form id="workout-form" action="/Start-workout" method="POST">
        <div id="exercise-fields"></div>
        <button type="button" id="add-exercise-btn">Add Exercise</button><br>
        <button type="submit">Start Workout</button>
    </form>
    
    <h2>Your Workouts</h2>
    <% if (workouts.length === 0) { %>
        <p>No workouts logged yet. Add your first workout above!</p>
    <% } else { %>
        <% workouts.forEach(workout => { %>
            <div class="workout">
                <strong><%= workout.name %></strong><br>
                Duration: <%= workout.duration %><br>
                Exercises:
                <% workout.exercises.forEach((ex, i) => { %>
                    <%= `${i + 1}. ${ex.name}` %>
                <% }) %>
                <br>
                <small>Date: <%= workout.date %></small>
            </div>
        <% }); %>
    <% } %>

    <script src="/scripts.js"></script>
    <script type="application/json" id="workout-data"><%- JSON.stringify(workouts) %></script>
    <script type="application/json" id="preset-workout-data"><%- JSON.stringify(preset_workouts) %></script>
    <script type="application/json" id="exercise-data"><%- JSON.stringify(exercises) %></script>
</body>
</html>